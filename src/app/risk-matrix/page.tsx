'use client'
import React, { useState, useEffect, useRef } from 'react';
import { useForm, SubmitHandler } from 'react-hook-form';
import PageHeader from "@/partials/PageHeader";
import { v4 as uuidv4 } from 'uuid';
import { useDataGlobal } from '../../model/DataGlobalContext';
import { Likelihoods, Severities, Risk_Rankings, Intersections } from '@/model/classModel';
import Concequencess from '../concequences/page';
const Riskmatrics: React.FC  = () => {
  const { dataGlobal, updateDataGlobal } = useDataGlobal();
//const initialSeverities: Severities[] = dataGlobal.Risk_Criteria.Severities;
  const initialIntersections : Intersections[] = [{"ID":"totksndlzxocm6fblctn45","Severity_ID":"v75ck4ib7f8b0mrk7q4q","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"m32gkwtgvif2bn7pzyvz7h","Severity_ID":"9xhhc8g374brb89fcbk1","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"qy9knubc3dfe3t53c95o5","Severity_ID":"k7a4ep9fpnt3po6ch0mcsp","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"a4a64wwt4ldyrm3rsuf9r","Severity_ID":"1bj3zzi72gy5qp5l12wx2","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"t447iuxew272squhaf6s5j","Severity_ID":"8o85eu5aw0gnxnenbt2bc","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"p4ivv1wo0bbmzcjme3zrqs","Severity_ID":"tzvyjz1r0sr317f42porig","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"l61zf8jo9uy9iftbut7wd","Severity_ID":"skxun25lxpf555t1u5aw92","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"2nvwuqa6wu31jd4ifquh4r","Severity_ID":"50v34s3s7kr10ws5j1o11wf","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"ww8f0maxpdovekx1s82dv","Severity_ID":"08i220uakn3n174z2fiix0w","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"h0lp4cx7vp6fws3kqyrmk","Severity_ID":"o6uqvq045j8xcqzml9drsc","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"yihqwvz5rojyhoimwn0iwt","Severity_ID":"a6cv4ejnfjlayd8u9ar2rj","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"p8e8kfjlafkorqo2pb132","Severity_ID":"v5ekras0gfqxc6bmmys01","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"hofadnh86qp922nxxlju2t","Severity_ID":"d05fztk5uhep0g4esbpmd","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"3543dipe0gkoccs6tcp8p","Severity_ID":"q5ql18g78jsvpo46zy9l8","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"o25op7rykis9a6g4rf4gk","Severity_ID":"j64sjwayqhol4alcdf0f1o","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"bnsr6fh1s0apoht38tvqh9","Severity_ID":"9rh48drs8xwuraarc1va59","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"w9acorga0bh68ixdg2cg","Severity_ID":"msojgmqhemcofwsyhiudon","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"4ksk8e4umyjwptg6tc9nxg","Severity_ID":"2fnac8bishxz8wgfzusmo","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"43p5v1etkw82eu2ianxxw4","Severity_ID":"914r6sz9py80qh31qoenob","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"g9er0cncu7rybw6uxnzc6","Severity_ID":"rmmodofd6j8pema7sszysh","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"yvbz6qxuilz05xqsnt8cp","Severity_ID":"428y9degv31tkjwzdyq1zi","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"b27agqm1eggiphcea89te","Severity_ID":"ihzajjauqdovjpf84je0o","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"ia1bs45di8apenjdl412ea","Severity_ID":"7xac0r4pt1jt7ul69zli2","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"xv67zsiyhvgam452g6pa6","Severity_ID":"fuffimi3vg82nss62a7gsa","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"zt6hl0swfcrmi0uljdluh","Severity_ID":"exrf2g78q96z5uzlta5vm","Likelihood_ID":"bl1v8u4tw3mzxagfltoay","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"7l4s71hotenoj6fpw4pc5h","Severity_ID":"v75ck4ib7f8b0mrk7q4q","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"m6uxbsnozj8um2vlvvnyas","Severity_ID":"9xhhc8g374brb89fcbk1","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"h7768dr3kyphmpxgzddgw","Severity_ID":"k7a4ep9fpnt3po6ch0mcsp","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"yuf2oardhcjrc9nvv5xii9","Severity_ID":"1bj3zzi72gy5qp5l12wx2","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"w2b1q709ttrfws9ymsl","Severity_ID":"8o85eu5aw0gnxnenbt2bc","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"5tgbg4mpx9swml4v5xzfj","Severity_ID":"tzvyjz1r0sr317f42porig","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"7dryhg7os79263k4h0c3qo","Severity_ID":"skxun25lxpf555t1u5aw92","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"cchkltbrymjekz760n6fyj","Severity_ID":"50v34s3s7kr10ws5j1o11wf","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"1nmolg1rz9h8pmcai7c724","Severity_ID":"08i220uakn3n174z2fiix0w","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"c5ym98esm2ln8uhejbigs","Severity_ID":"o6uqvq045j8xcqzml9drsc","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"4wk0u9h08z7y7xrg72sqn","Severity_ID":"a6cv4ejnfjlayd8u9ar2rj","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"c0bu91l5t7n0siit3jt691n","Severity_ID":"v5ekras0gfqxc6bmmys01","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"slxk03felpp9f5wh3prolm","Severity_ID":"d05fztk5uhep0g4esbpmd","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"khj335ka1h9t0blc5w8a2","Severity_ID":"q5ql18g78jsvpo46zy9l8","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"1n4b2z8lhzznahaazwwulq","Severity_ID":"j64sjwayqhol4alcdf0f1o","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"xr4p9imztwdnyxrnpths","Severity_ID":"9rh48drs8xwuraarc1va59","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"i7z3vcd576yl59vrwx8u","Severity_ID":"msojgmqhemcofwsyhiudon","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"rr2vbkvy315qo5iklnwy8","Severity_ID":"2fnac8bishxz8wgfzusmo","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"36ioe3h3ymjs0uc8ybrss","Severity_ID":"914r6sz9py80qh31qoenob","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"uepkdk5oahqqjl7c7yktvp","Severity_ID":"rmmodofd6j8pema7sszysh","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"s06r93waz1h22va2qv0cap","Severity_ID":"428y9degv31tkjwzdyq1zi","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"qshkifcs2at8o3b2evjh","Severity_ID":"ihzajjauqdovjpf84je0o","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"s7jmg6eyj7clp85bjmols","Severity_ID":"7xac0r4pt1jt7ul69zli2","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"eim0w7o20672nwke32q3yy","Severity_ID":"fuffimi3vg82nss62a7gsa","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"qgqtk5kcv7liuw1cnezbji","Severity_ID":"exrf2g78q96z5uzlta5vm","Likelihood_ID":"drp6qkyi1tsddx3l49vown","Risk_Rank_ID":"k567sqcskwjgr50n5vshbh"},{"ID":"kar3rrxm80suyql7zc70a","Severity_ID":"v75ck4ib7f8b0mrk7q4q","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"n5iky72umb9j25erefqtjp","Severity_ID":"9xhhc8g374brb89fcbk1","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"rx92cu0e3ujie2ktaeb6eb","Severity_ID":"k7a4ep9fpnt3po6ch0mcsp","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"c7sjj9wczchyql6p5et2f","Severity_ID":"1bj3zzi72gy5qp5l12wx2","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"lokkbh1vc3m02iraxk6d","Severity_ID":"8o85eu5aw0gnxnenbt2bc","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"n6xu1q02q0kd276077hak8","Severity_ID":"tzvyjz1r0sr317f42porig","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"v63lu2bqh2ji28l2mm3nqi","Severity_ID":"skxun25lxpf555t1u5aw92","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"uesy7l35d0e7ql2wipub8j","Severity_ID":"50v34s3s7kr10ws5j1o11wf","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"chtcng1m4r9fuwxjofjix","Severity_ID":"08i220uakn3n174z2fiix0w","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"076lj5zdnxav0tp0aoamw05f","Severity_ID":"o6uqvq045j8xcqzml9drsc","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"dcvk6jeoghg2kajyq7z9fq","Severity_ID":"a6cv4ejnfjlayd8u9ar2rj","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"y9lhqeeg8hkox14a1c9tsn","Severity_ID":"v5ekras0gfqxc6bmmys01","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"9pt1xfohbimhmvbbblkrtq","Severity_ID":"d05fztk5uhep0g4esbpmd","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"z90vbjvg7qkj3l6hqr38","Severity_ID":"q5ql18g78jsvpo46zy9l8","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"yqrqepmlzwewtem9e04cp","Severity_ID":"j64sjwayqhol4alcdf0f1o","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"ehco7iocga6dyr39tgizpa","Severity_ID":"9rh48drs8xwuraarc1va59","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"bbtedtd51tgh7qm5bxzhfc","Severity_ID":"msojgmqhemcofwsyhiudon","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"xl0aztxmkvbqlurcsqbvh8","Severity_ID":"2fnac8bishxz8wgfzusmo","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"g3re2udi7jjicklu6bu8ed","Severity_ID":"914r6sz9py80qh31qoenob","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"sbjcqcrlq58w3heqn29pn","Severity_ID":"rmmodofd6j8pema7sszysh","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"yyo0gubxvqecfdovugdlwl","Severity_ID":"428y9degv31tkjwzdyq1zi","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"eyqdp9y8nyhis7huvr4kcc","Severity_ID":"ihzajjauqdovjpf84je0o","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"w0oxnu84l6fhz6b76eda28","Severity_ID":"7xac0r4pt1jt7ul69zli2","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"y0fphvjo3zj8j8rhbjx5ey","Severity_ID":"fuffimi3vg82nss62a7gsa","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"ak3ioru576nx6xpkkhb9r","Severity_ID":"exrf2g78q96z5uzlta5vm","Likelihood_ID":"y677s2k2osdgyhbq2879vg","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"b2769ep4eckzl3mwpxsqup","Severity_ID":"v75ck4ib7f8b0mrk7q4q","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"xk4sitvvmyfqo94mbiw6m","Severity_ID":"9xhhc8g374brb89fcbk1","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"gup7vdlzn6o8x60f0g81wg","Severity_ID":"k7a4ep9fpnt3po6ch0mcsp","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"k7xu8jh201ptjj106lgpo","Severity_ID":"1bj3zzi72gy5qp5l12wx2","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"ued71geitikmauzxopnaej","Severity_ID":"8o85eu5aw0gnxnenbt2bc","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"9leax4q0pa52s317i3gaqm","Severity_ID":"tzvyjz1r0sr317f42porig","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"ony9je0eo23oz2paphhis","Severity_ID":"skxun25lxpf555t1u5aw92","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"2qiqxuzkmh4ek9omiixeb","Severity_ID":"50v34s3s7kr10ws5j1o11wf","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"chv87v7bdomonqmjokie0i","Severity_ID":"08i220uakn3n174z2fiix0w","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"hw3wth32dnpb9eihmlhs4v","Severity_ID":"o6uqvq045j8xcqzml9drsc","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"vgxlmn97m7ldysdxaw3z7c","Severity_ID":"a6cv4ejnfjlayd8u9ar2rj","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"7boh4v1nrlg1uqk81af4d6","Severity_ID":"v5ekras0gfqxc6bmmys01","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"8sspvm7c0ufdj3494ob2tm","Severity_ID":"d05fztk5uhep0g4esbpmd","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"mnpqjx341iehvmrvurm8","Severity_ID":"q5ql18g78jsvpo46zy9l8","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"jn1xkx3awm0m65sfyz3gk","Severity_ID":"j64sjwayqhol4alcdf0f1o","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"x3lc9hpw22eypajh8k0hf","Severity_ID":"9rh48drs8xwuraarc1va59","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"jf0b63kh36f420s1hkvlg6","Severity_ID":"msojgmqhemcofwsyhiudon","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"odpvmsly4992v1rt93d5m","Severity_ID":"2fnac8bishxz8wgfzusmo","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"773mibmgbyfsymtlgtxz5i","Severity_ID":"914r6sz9py80qh31qoenob","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"ayk7ojhosdhupd3t94c5p","Severity_ID":"rmmodofd6j8pema7sszysh","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"6dgnitdrjs39qo5812173","Severity_ID":"428y9degv31tkjwzdyq1zi","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"rxadagdypw8bt6zqcczoze","Severity_ID":"ihzajjauqdovjpf84je0o","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"m62dk21q44gn5ll5gj1rwn","Severity_ID":"7xac0r4pt1jt7ul69zli2","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"ylq3yi6yk2pty4n5lghpsp","Severity_ID":"fuffimi3vg82nss62a7gsa","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"i7mhtjvt6vsay9ksfr66w8","Severity_ID":"exrf2g78q96z5uzlta5vm","Likelihood_ID":"67kvjl76oxevh1kwp3v1uo","Risk_Rank_ID":"ld9f06nbvcxia4dbzhma"},{"ID":"dfniyd5linesgbyksbenpq","Severity_ID":"v75ck4ib7f8b0mrk7q4q","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"dnjaxs1hxqbavk46by310c"},{"ID":"dz6t3ovpx64mikmvyalb2","Severity_ID":"9xhhc8g374brb89fcbk1","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"xzis012x7pkyb7i6qfzws","Severity_ID":"k7a4ep9fpnt3po6ch0mcsp","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"ajx3ygmyesfsixorlk2nua","Severity_ID":"1bj3zzi72gy5qp5l12wx2","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"xwyugt5eejunko9no6exj","Severity_ID":"8o85eu5aw0gnxnenbt2bc","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"t56tefbw61odftxxad0m","Severity_ID":"tzvyjz1r0sr317f42porig","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"dnjaxs1hxqbavk46by310c"},{"ID":"egmqmizusksxuucnweak4","Severity_ID":"skxun25lxpf555t1u5aw92","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"zeptz5tdu5e0uq5q2lqfap","Severity_ID":"50v34s3s7kr10ws5j1o11wf","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"ijvurj96kcmxbqgyw3f7ik","Severity_ID":"08i220uakn3n174z2fiix0w","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"i779ihbzmklregd2cxr7bl","Severity_ID":"o6uqvq045j8xcqzml9drsc","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"ak3pewk9xcusx4si9f5sq","Severity_ID":"a6cv4ejnfjlayd8u9ar2rj","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"dnjaxs1hxqbavk46by310c"},{"ID":"j4fcoyt8slonh0b5orgzdp","Severity_ID":"v5ekras0gfqxc6bmmys01","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"mc7coeooi6sxb8i9g6wj","Severity_ID":"d05fztk5uhep0g4esbpmd","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"9g8dqo1dt318iul3wa91q","Severity_ID":"q5ql18g78jsvpo46zy9l8","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"89sadbz3i2reli9ez2fkcs","Severity_ID":"j64sjwayqhol4alcdf0f1o","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"86zdgqwp0kxnoumfex9ho","Severity_ID":"9rh48drs8xwuraarc1va59","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"dnjaxs1hxqbavk46by310c"},{"ID":"562gq2xedeo2kk80vk3a6d","Severity_ID":"msojgmqhemcofwsyhiudon","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"k84aggn9vg0cv9gdlu2f","Severity_ID":"2fnac8bishxz8wgfzusmo","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"8lq6hmg0x55n0qssawwqbk","Severity_ID":"914r6sz9py80qh31qoenob","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"w43mln6swrvkkvauwwjqf","Severity_ID":"rmmodofd6j8pema7sszysh","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"dk3anwgbqwv6owsydwfali","Severity_ID":"428y9degv31tkjwzdyq1zi","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"dnjaxs1hxqbavk46by310c"},{"ID":"879gxiz74xb7r6qyx9zux7","Severity_ID":"ihzajjauqdovjpf84je0o","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"bqkj5zg7cipuqoeapoxklh","Severity_ID":"7xac0r4pt1jt7ul69zli2","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"fjiqx3rvx4uh6rgxm60qf8"},{"ID":"snrb4scs4cyminnihwpro","Severity_ID":"fuffimi3vg82nss62a7gsa","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"},{"ID":"ztt6e49ygh80d3bh4y9d2i","Severity_ID":"exrf2g78q96z5uzlta5vm","Likelihood_ID":"qkefftnb5udhdb6nj3q6g","Risk_Rank_ID":"q4mtabb543wzlbkia252"}];
  const [intersections, setIntersections] = useState<Intersections[]>(initialIntersections);
  const initialSeverities : Severities[] = [{"ID":"a6cv4ejnfjlayd8u9ar2rj","Severity_Type":"Asset","RM_Description":"VeryHigh","RM_Tmel":"1E-5","Code":"VH"},{"ID":"v5ekras0gfqxc6bmmys01","Severity_Type":"Asset","RM_Description":"High","RM_Tmel":"1E-4","Code":"H"},{"ID":"d05fztk5uhep0g4esbpmd","Severity_Type":"Asset","RM_Description":"Medium","RM_Tmel":"1E-3","Code":"M"},{"ID":"q5ql18g78jsvpo46zy9l8","Severity_Type":"Asset","RM_Description":"Low","RM_Tmel":"1E-2","Code":"L"},{"ID":"j64sjwayqhol4alcdf0f1o","Severity_Type":"Asset","RM_Description":"VeryLow","RM_Tmel":"1E-1","Code":"VL"},{"ID":"tzvyjz1r0sr317f42porig","Severity_Type":"Environment","RM_Description":"VeryHigh","RM_Tmel":"1E-5","Code":"VH"},{"ID":"skxun25lxpf555t1u5aw92","Severity_Type":"Environment","RM_Description":"High","RM_Tmel":"1E-4","Code":"H"},{"ID":"50v34s3s7kr10ws5j1o11wf","Severity_Type":"Environment","RM_Description":"Medium","RM_Tmel":"1E-3","Code":"M"},{"ID":"08i220uakn3n174z2fiix0w","Severity_Type":"Environment","RM_Description":"Low","RM_Tmel":"1E-2","Code":"L"},{"ID":"o6uqvq045j8xcqzml9drsc","Severity_Type":"Environment","RM_Description":"VeryLow","RM_Tmel":"1E-1","Code":"VL"},{"ID":"v75ck4ib7f8b0mrk7q4q","Severity_Type":"Safety","RM_Description":"VeryHigh","RM_Tmel":"1E-5","Code":"VH"},{"ID":"9xhhc8g374brb89fcbk1","Severity_Type":"Safety","RM_Description":"High","RM_Tmel":"1E-4","Code":"H"},{"ID":"k7a4ep9fpnt3po6ch0mcsp","Severity_Type":"Safety","RM_Description":"Medium","RM_Tmel":"1E-3","Code":"M"},{"ID":"1bj3zzi72gy5qp5l12wx2","Severity_Type":"Safety","RM_Description":"Low","RM_Tmel":"1E-2","Code":"L"},{"ID":"8o85eu5aw0gnxnenbt2bc","Severity_Type":"Safety","RM_Description":"VeryLow","RM_Tmel":"1E-1","Code":"VL"},{"ID":"428y9degv31tkjwzdyq1zi","Severity_Type":"Reputation","RM_Description":"VeryHigh","RM_Tmel":"1E-5","Code":"VH"},{"ID":"ihzajjauqdovjpf84je0o","Severity_Type":"Reputation","RM_Description":"High","RM_Tmel":"1E-4","Code":"H"},{"ID":"7xac0r4pt1jt7ul69zli2","Severity_Type":"Reputation","RM_Description":"Medium","RM_Tmel":"1E-3","Code":"M"},{"ID":"fuffimi3vg82nss62a7gsa","Severity_Type":"Reputation","RM_Description":"Low","RM_Tmel":"1E-2","Code":"L"},{"ID":"exrf2g78q96z5uzlta5vm","Severity_Type":"Reputation","RM_Description":"VeryLow","RM_Tmel":"1E-1","Code":"VL"},{"ID":"9rh48drs8xwuraarc1va59","Severity_Type":"Community","RM_Description":"VeryHigh","RM_Tmel":"1E-5","Code":"VH"},{"ID":"msojgmqhemcofwsyhiudon","Severity_Type":"Community","RM_Description":"High","RM_Tmel":"1E-4","Code":"H"},{"ID":"2fnac8bishxz8wgfzusmo","Severity_Type":"Community","RM_Description":"Medium","RM_Tmel":"1E-3","Code":"M"},{"ID":"914r6sz9py80qh31qoenob","Severity_Type":"Community","RM_Description":"Low","RM_Tmel":"1E-2","Code":"L"},{"ID":"rmmodofd6j8pema7sszysh","Severity_Type":"Community","RM_Description":"VeryLow","RM_Tmel":"1E-1","Code":"VL"}];
  const [severities, setseverities] = useState<Severities[]>(initialSeverities);
  const initialLikelihood: Likelihoods[] = [{"ID":"bl1v8u4tw3mzxagfltoay","RM_Description":"VeryLow","Frequency":"1E-4","Code":"VL"},{"ID":"drp6qkyi1tsddx3l49vown","RM_Description":"Low","Frequency":"1E-3","Code":"L"},{"ID":"y677s2k2osdgyhbq2879vg","RM_Description":"Medium","Frequency":"1E-2","Code":"M"},{"ID":"67kvjl76oxevh1kwp3v1uo","RM_Description":"High","Frequency":"1E-1","Code":"H"},{"ID":"qkefftnb5udhdb6nj3q6g","RM_Description":"VeryHigh","Frequency":"1E+0","Code":"VH"}];
  dataGlobal.Risk_Criteria.Likelihoods;
  const [likelihoods, setLikelihoods] = useState<Likelihoods[]>(initialLikelihood);
  const initialRisk_Rankings: Risk_Rankings[] = [{"ID":"dnjaxs1hxqbavk46by310c","RM_Description":"VeryHigh","Code":"5","Color":"Maroon","Priority":"1","Required_Lopa_Credits":"3"},{"ID":"fjiqx3rvx4uh6rgxm60qf8","RM_Description":"High","Code":"4","Color":"Red","Priority":"2","Required_Lopa_Credits":"2"},{"ID":"q4mtabb543wzlbkia252","RM_Description":"Medium","Code":"3","Color":"Orange","Priority":"3","Required_Lopa_Credits":"1"},{"ID":"ld9f06nbvcxia4dbzhma","RM_Description":"Low","Code":"2","Color":"Yellow","Priority":"4","Required_Lopa_Credits":"0"},{"ID":"k567sqcskwjgr50n5vshbh","RM_Description":"VeryLow","Code":"1","Color":"Green","Priority":"5","Required_Lopa_Credits":"0"}];
  const [riskRankings, setriskRankings] = useState<Risk_Rankings[]>(initialRisk_Rankings);
  const [filteredSeveritys, setFilteredSeveritys] = useState(severities);
  const [severityType, setSeverityType] = useState("Safety");
 
  useEffect(() => {
    // Melakukan filter saat komponen pertama kali dimuat
    handleTypeChange('Safety');
  }, []);
  const handleTypeChange = (value: string) => {
    setSeverityType(value);
    const filteredDataSaverity = severities.filter((severity) => severity.Severity_Type === value);
    console.log(filteredDataSaverity);
    setFilteredSeveritys(filteredDataSaverity);
  };
  const handleDataChange = (severityID : string, likelihoodID: string, newValue:string) => {
    // Update the attendanceData state based on user selection
    const updatedData = intersections.map((intersection) => {
      if (intersection.Severity_ID === severityID && intersection.Likelihood_ID === likelihoodID) {
        return { ...intersection, Risk_Rank_ID: newValue };
      }
      return intersection;
    });
    setIntersections(updatedData);
  };
  const getBackgroundColor= (severityID: string, likelihoodID: string ) => {
    const data =  intersections.find(
      (intersection) =>
      intersection.Severity_ID === severityID &&
      intersection.Likelihood_ID === likelihoodID
    )?.Risk_Rank_ID;
    const result = riskRankings.find((riskRangking) => riskRangking.ID === data );
    return result?.Color;
  };
  return (
    <>
    <PageHeader title="Risk Matrix" />
      <section className="section-sm">
        <div className="container">
        <div className="row">
            <div className="w-1/6">
              <ul>
                <li className="mb-4 lg:mb-2"><a href="/risk-matrix" className="block hover:text-gray-900 font-medium text-gray-600">Risk Matrix</a></li>
                <li className="mb-4 lg:mb-2"><a href="/likelihoods" className="block hover:text-gray-900 font-medium  text-gray-600">Likelihood Categories</a></li>
                <li className="mb-4 lg:mb-2"><a href="/concequences" className="block hover:text-gray-900 font-medium text-gray-600">Concequences Categorys</a></li>
                <li className="mb-4 lg:mb-2"><a href="/risk-rankings" className="block hover:text-gray-900 text-lg text-black">Risk Ranking</a></li>
                </ul>
                </div>
            <div className="w-5/6">
                
      <h1>Risk Matrix</h1>
      <div> 
<select className=' bg-transparent w-full leading-tight focus:outline-none'
                  value={severityType}
                  onChange={(e) => handleTypeChange(e.target.value)} >
                    <option  value="Safety">Safety</option>
                    <option  value="Environment">Environment</option>
                    <option  value="Asset">Asset</option>
                    <option  value="Community">Community</option>
                    <option  value="Reputation">Reputation</option>
                  </select>
</div>
      <table className='table-auto'>
      {filteredSeveritys.map((severity, index) => (
            <tr key={severity.ID}>    
            {index === 0 ? <td rowSpan={filteredSeveritys.length} className='rotate'><b>Concequences</b></td> : ''}  
              <td className='border px-4 py-2'>{severity.RM_Description}</td>
              {likelihoods.map((likelihood) => (
                <td key={likelihood.ID} className='border px-4 py-2' style={{ backgroundColor: getBackgroundColor(severity.ID,likelihood.ID) }}>
                  <select className='appearance-none bg-transparent border-none w-full leading-tight focus:outline-none'
                  value={intersections.find(
                    (intersection) =>
                    intersection.Severity_ID === severity.ID &&
                    intersection.Likelihood_ID === likelihood.ID
                  )?.Risk_Rank_ID}
                  onChange={(e) =>
                    handleDataChange(severity.ID, likelihood.ID, e.target.value)
                  } >
                    {riskRankings.map((riskRangking)=>(
                      <option key={riskRangking.ID} value={riskRangking.ID}>{riskRangking.Priority}</option>
                    ))}
                  </select>
                </td>
              ))}
            </tr>
          ))}
          <tr>
          <td></td>
            <td></td>
            {likelihoods.map((likelihood) => (
              <td key={likelihood.ID} className='border px-4 py-2'>{likelihood.RM_Description}</td>
            ))}
          </tr>
          <tr>
          <td></td>
          <td></td>
          <td colSpan={likelihoods.length + 1} className='text-center'><b>Likelihoods</b></td>
        </tr>
      </table>
    </div>
  </div>
  </div>
</section>
    </>
  );
};

export default Riskmatrics;

